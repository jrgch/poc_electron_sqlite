<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Personas</title>
    <style>
      body { font-family: sans-serif; display: flex; gap: 20px; padding: 20px; }
      table, th, td { border: 1px solid black; border-collapse: collapse; padding: 8px; }
      table { width: 100%; }
      .form { display: flex; flex-direction: column; gap: 10px; }
    </style>
  </head>
  <body>
    <div>
      <h2>Lista de Personas</h2>
      <table id="tabla">
        <thead><tr><th>Nombre</th><th>Edad</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="form">
      <h2>Agregar Persona</h2>
      <input id="nombre" placeholder="Nombre" />
      <input id="edad" type="number" placeholder="Edad" />
      <button id="guardar">Guardar</button>
    </div>
    <script>
      const nombreInput = document.getElementById('nombre');
      const edadInput = document.getElementById('edad');
      const guardarBtn = document.getElementById('guardar');
      const tablaBody = document.querySelector('#tabla tbody');

      async function cargarPersonas() {
        const personas = await window.api.getPersonas();
        tablaBody.innerHTML = '';
        personas.forEach(p => {
          const row = document.createElement('tr');
          row.innerHTML = `<td>${p.nombre}</td><td>${p.edad}</td>`;
          tablaBody.appendChild(row);
        });
      }

      guardarBtn.addEventListener('click', async () => {
        const nombre = nombreInput.value.trim();
        const edad = parseInt(edadInput.value);
        if (nombre && !isNaN(edad)) {
          await window.api.addPersona({ nombre, edad });
          nombreInput.value = '';
          edadInput.value = '';
          cargarPersonas();
        }
      });

      cargarPersonas();
    </script>
  </body>
</html>